name: Project Diagnosis

on:
  push:
    branches: [ main, master ]

jobs:
  diagnose:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Complete Project Analysis
      run: |
        echo "üîç COMPLETE PROJECT ANALYSIS"
        echo "============================"
        echo ""
        echo "üìÅ ROOT DIRECTORY CONTENTS:"
        ls -la
        echo ""
        echo "üìä PROJECT TYPE DETECTION:"
        echo "--------------------------"
        
        if [ -f "app/build.gradle" ] && [ -f "app/src/main/AndroidManifest.xml" ]; then
          echo "‚úÖ ANDROID APP PROJECT"
          echo "üì± Android files found:"
          find . -name "AndroidManifest.xml" -o -name "*.gradle" | head -10
        elif [ -f "build.gradle" ] && [ -d "src" ]; then
          echo "‚úÖ JAVA/KOTLIN LIBRARY PROJECT" 
        elif [ -f "package.json" ]; then
          echo "‚úÖ NODE.JS PROJECT"
          cat package.json | head -10
        elif [ -f "requirements.txt" ]; then
          echo "‚úÖ PYTHON PROJECT"
          cat requirements.txt | head -10
        elif [ -f "Cargo.toml" ]; then
          echo "‚úÖ RUST PROJECT"
        elif [ -f "go.mod" ]; then
          echo "‚úÖ GO PROJECT"
        elif [ -f "pubspec.yaml" ]; then
          echo "‚úÖ FLUTTER PROJECT"
        elif [ -f "index.html" ]; then
          echo "‚úÖ WEB PROJECT"
        else
          echo "‚ùì UNKNOWN PROJECT TYPE"
          echo ""
          echo "üìã ALL FILES ANALYSIS:"
          echo "---------------------"
          find . -type f -name "*.*" | head -30
        fi

        echo ""
        echo "üìÇ DIRECTORY STRUCTURE:"
        echo "----------------------"
        find . -maxdepth 3 -type d | sort

    - name: Check Build Systems
      run: |
        echo "üõ†Ô∏è BUILD SYSTEMS CHECK:"
        echo "----------------------"
        if [ -f "gradlew" ]; then
          echo "‚úÖ Gradle Wrapper found"
        else
          echo "‚ùå Gradle Wrapper not found"
        fi
        
        if [ -f "build.gradle" ]; then
          echo "‚úÖ build.gradle found"
          echo "Gradle content preview:"
          head -20 build.gradle
        fi
        
        if [ -f "app/build.gradle" ]; then
          echo "‚úÖ app/build.gradle found"
          echo "App Gradle content preview:"
          head -20 app/build.gradle
        fi
